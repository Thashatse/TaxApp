@model IEnumerable<Model.SearchViewModel>

@{
    ViewBag.Title = "Search";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="header bg-gradient-primary py-7 py-lg-8">
    <div class="header-body text-center mb-7">
        <div class="row justify-content-center">
            <div class="col-lg-5 col-md-6">
                <h1 class="text-white">
                    Search Results
                </h1>
                <h3 class="text-white">
                    @ViewBag.DateRange
                </h3>
            </div>
        </div>
    </div>
</div>

<div class="container-fluid mt--7">
    <div class="row mt-5">
        <div class="col-xl-12 mb-5 mb-xl-0">
            <div class="card shadow">
                <div class="card-header border-0">
                    <div class="row align-items-center">
                        <div class="col">
                            <h3 class="mb-0">
                                @ViewBag.SearchType Results for search term: '@ViewBag.term'  &nbsp;
                                @if (ViewBag.SearchType != null && ViewBag.SearchType != "")
                                {
                                    <a class="btn btn-sm btn-white" href="Search?view=@ViewBag.view&StartDateRange=@ViewBag.StartDateRange&EndDateRange=@ViewBag.EndDateRange&term=@ViewBag.term&cat=A">
                                        View All Results
                                    </a>
                                }
                            </h3>
                        </div>
                        <div class="col-3 text-right">
                            <a data-toggle="collapse" href="#Filter" class="btn btn-secondary">
                                Filter By
                                <i class="ni ni-ui-04"></i>
                            </a>
                        </div>
                    </div>
                    <div class="panel-collapse collapse" id="Filter">
                        <div class="row align-items-center">
                            <div class="col-12">

                                @using (Html.BeginForm())
                                {
                                    @Html.AntiForgeryToken()
                                    <p>
                                        Start: <input name="StartDate" type="date" value="@ViewBag.StartDateRange" />
                                        End: <input name="EndDate" type="date" value="@ViewBag.EndDateRange" />
                                        <input type="submit" value="Update date range" class="btn btn-sm btn-default" />
                                    </p>
                                }
                            </div>
                        </div>
                        <div class="row align-items-center">
                            <div class="col">

                                <a class="btn btn-lg btn-white" href="Search?view=@ViewBag.view&StartDateRange=@ViewBag.StartDateRange&EndDateRange=@ViewBag.EndDateRange&term=@ViewBag.term&cat=A">
                                    <i class="ni ni-align-left-2"></i>
                                    <span>All</span>
                                </a>

                                <a class="btn btn-lg btn-white" href="Search?view=@ViewBag.view&StartDateRange=@ViewBag.StartDateRange&EndDateRange=@ViewBag.EndDateRange&term=@ViewBag.term&cat=C">
                                    <i class="ni ni-align-left-2"></i>
                                    <span>Client</span>
                                </a>

                                <a class="btn btn-lg btn-white" href="Search?view=@ViewBag.view&StartDateRange=@ViewBag.StartDateRange&EndDateRange=@ViewBag.EndDateRange&term=@ViewBag.term&cat=GE">
                                    <i class="ni ni-align-left-2"></i>
                                    <span>Genetal Expenses</span>
                                </a>

                                <a class="btn btn-lg btn-white" href="Search?view=@ViewBag.view&StartDateRange=@ViewBag.StartDateRange&EndDateRange=@ViewBag.EndDateRange&term=@ViewBag.term&cat=I">
                                    <i class="ni ni-align-left-2"></i>
                                    <span>Invoice</span>
                                </a>

                                <a class="btn btn-lg btn-white" href="Search?view=@ViewBag.view&StartDateRange=@ViewBag.StartDateRange&EndDateRange=@ViewBag.EndDateRange&term=@ViewBag.term&cat=J">
                                    <i class="ni ni-align-left-2"></i>
                                    <span>Job</span>
                                </a>

                                <a class="btn btn-lg btn-white" href="Search?view=@ViewBag.view&StartDateRange=@ViewBag.StartDateRange&EndDateRange=@ViewBag.EndDateRange&term=@ViewBag.term&cat=JE">
                                    <i class="ni ni-align-left-2"></i>
                                    <span>Job Expense</span>
                                </a>

                                <a class="btn btn-lg btn-white" href="Search?view=@ViewBag.view&StartDateRange=@ViewBag.StartDateRange&EndDateRange=@ViewBag.EndDateRange&term=@ViewBag.term&cat=TC">
                                    <i class="ni ni-align-left-2"></i>
                                    <span>Tax Consultnat</span>
                                </a>

                                <a class="btn btn-lg btn-white" href="Search?view=@ViewBag.view&StartDateRange=@ViewBag.StartDateRange&EndDateRange=@ViewBag.EndDateRange&term=@ViewBag.term&cat=TL">
                                    <i class="ni ni-align-left-2"></i>
                                    <span>Travel Log</span>
                                </a>

                                <a class="btn btn-lg btn-white" href="Search?view=@ViewBag.view&StartDateRange=@ViewBag.StartDateRange&EndDateRange=@ViewBag.EndDateRange&term=@ViewBag.term&cat=WL">
                                    <i class="ni ni-align-left-2"></i>
                                    <span>Work Log</span>
                                </a>
                            </div>
                        </div>
                    </div>
                    <br />
                    <div class="table-responsive">
                        <table class="table">
                            @if (Model != null)
                            {
                                foreach (var item in Model)
                                {
                                    <tr>
                                        <td>
                                            <h4>
                                                <a href="@Html.DisplayFor(modelItem => item.ResultLink)">
                                                    @Html.DisplayFor(modelItem => item.ResultTitle)
                                                </a>
                                            </h4> <br />
                                            @Html.DisplayFor(modelItem => item.ResultDetails)
                                            -
                                            @Html.DisplayFor(modelItem => item.ResultDateString)
                                        </td>
                                    </tr>
                                }
                            }
                            @if (Model != null)
                            {
                                if (Model.Count() == 0)
                                {
                                    <tr>
                                        <td>
                                            No Results
                                        </td>
                                    </tr>
                                }
                            }
                        </table>
                    </div>
                </div>
        </div>
    </div>
        </div>